{"version":3,"file":"explorer-CDwkKfuH.js","sources":["../../umbraco.context.explorer.client/src/Core/Elements/explorer.ts"],"sourcesContent":["import {customElement, html, state, nothing, map, css, property} from '@umbraco-cms/backoffice/external/lit';\r\nimport {UmbLitElement} from '@umbraco-cms/backoffice/lit-element';\r\nimport {UMB_EXTENSION_EXPLORER_CONTEXT} from '../context';\r\nimport { UMB_MODAL_MANAGER_CONTEXT, UmbModalManagerContext } from '@umbraco-cms/backoffice/modal';\r\nimport { UMB_CONTEXT_DEBUGGER_MODAL } from '@umbraco-cms/backoffice/debug';\r\nimport { UmbContextDebugRequest, UmbDebugContextData, UmbDebugContextItemData, contextData } from '@umbraco-cms/backoffice/context-api';\r\nimport { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\n@customElement('umb-package-explorer')\r\nexport class UmbExtensionExplorer extends UmbLitElement {\r\n    @property({ type: String })\r\n\tregistrationAlias = 'Our.ExtensionExplorer.HeaderApp';\r\n\r\n    @state()\r\n    private _explorerHide: boolean = true;\r\n\r\n    @state()\r\n\tprivate _contextData = Array<UmbDebugContextData>();\r\n\r\n    private _modalContext?: UmbModalManagerContext;\r\n\r\n    #ExtensionExplorerContext?: typeof UMB_EXTENSION_EXPLORER_CONTEXT.TYPE;\r\n\r\n    constructor() {\r\n        super();\r\n        this.consumeContext(UMB_EXTENSION_EXPLORER_CONTEXT, (instance) => {\r\n            this.#ExtensionExplorerContext = instance;\r\n            this._observeState();\r\n        });\r\n        this.consumeContext(UMB_MODAL_MANAGER_CONTEXT, (instance) => {\r\n\t\t\tthis._modalContext = instance;\r\n\t\t});\r\n    }\r\n\r\n    private async _observeState() {\r\n        if (!this.#ExtensionExplorerContext) return;\r\n\r\n        this.observe(\r\n            this.#ExtensionExplorerContext.hide,\r\n            (state) => {\r\n                this._explorerHide = state ?? true;\r\n                // if (!state) return;\r\n            },\r\n            'umbContextStateObserver',\r\n        );\r\n    }\r\n\r\n    #update() {\r\n\t\tthis.dispatchEvent(\r\n\t\t\tnew UmbContextDebugRequest((contexts: Map<any, any>) => {\r\n\t\t\t\t// The Contexts are collected\r\n\t\t\t\t// When travelling up through the DOM from this element\r\n\t\t\t\t// to the root of <umb-app> which then uses the callback prop\r\n\t\t\t\t// of this event that has been raised to assign the contexts\r\n\t\t\t\t// back to this property of the WebComponent\r\n\r\n\t\t\t\t// Massage the data into a simplier array of objects\r\n\t\t\t\t// from a function in the context-api.\r\n\t\t\t\tthis._contextData = contextData(contexts);\r\n\t\t\t\tthis.requestUpdate('_contextData');\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n    #openDialog() {\r\n\t\tthis.#update();\r\n\r\n\t\tthis._modalContext?.open(this, UMB_CONTEXT_DEBUGGER_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\tcontent: this.#ExtensionExplorerContext!.generateDialogContent(this._contextData,this.registrationAlias),\r\n\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n    override render() {\r\n        if(this._explorerHide){\r\n            return nothing;\r\n        }\r\n        return html`\r\n\t\t\t<div>\r\n\t\t\t\t<uui-badge color=\"danger\" look=\"primary\" @click=${this.#openDialog}>\r\n\t\t\t\t\t<uui-icon name=\"icon-bug\"></uui-icon>\r\n\t\t\t\t\t<span>Debug</span>\r\n\t\t\t\t</uui-badge>\r\n\t\t\t</div>\r\n\t\t`;\r\n    }\r\n\r\n    static override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tfloat: right;\r\n\t\t\t\tfont-family: monospace;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tz-index: 10000;\r\n\t\t\t}\r\n\r\n\t\t\t#container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\talign-items: flex-end;\r\n\t\t\t}\r\n\r\n\t\t\tuui-badge {\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tgap: 0.5rem;\r\n\t\t\t}\r\n\r\n\t\t\tuui-icon {\r\n\t\t\t\tfont-size: 15px;\r\n\t\t\t}\r\n\r\n\t\t\t.events {\r\n\t\t\t\tbackground-color: var(--uui-color-danger);\r\n\t\t\t\tcolor: var(--uui-color-selected-contrast);\r\n\t\t\t\tpadding: 1rem;\r\n\t\t\t}\r\n\r\n\t\t\tsummary {\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t}\r\n\r\n\t\t\tdetails > details {\r\n\t\t\t\tmargin-left: 1rem;\r\n\t\t\t}\r\n\r\n\t\t\tul {\r\n\t\t\t\tmargin-top: 0;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport {UmbExtensionExplorer as element};"],"names":["_ExtensionExplorerContext","_UmbExtensionExplorer_instances","update_fn","openDialog_fn","UmbExtensionExplorer","UmbLitElement","__privateAdd","UMB_EXTENSION_EXPLORER_CONTEXT","instance","__privateSet","UMB_MODAL_MANAGER_CONTEXT","__privateGet","state","nothing","html","__privateMethod","UmbContextDebugRequest","contexts","contextData","_a","UMB_CONTEXT_DEBUGGER_MODAL","css","__decorateClass","property","customElement"],"mappings":";;;;;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC;AASa,IAAAC,IAAN,cAAmCC,EAAc;AAAA,EAcpD,cAAc;AACJ,aAfPC,EAAA,MAAAL,CAAA,GAEc,KAAA,oBAAA,mCAGjB,KAAQ,gBAAyB,IAGpC,KAAQ,eAAe,SAIpBK,EAAA,MAAAN,CAAA,GAIS,KAAA,eAAeO,GAAgC,CAACC,MAAa;AAC9D,MAAAC,EAAA,MAAKT,GAA4BQ,CAAA,GACjC,KAAK,cAAc;AAAA,IAAA,CACtB,GACI,KAAA,eAAeE,GAA2B,CAACF,MAAa;AAClE,WAAK,gBAAgBA;AAAA,IAAA,CACrB;AAAA,EACC;AAAA,EAEA,MAAc,gBAAgB;AACtB,IAACG,QAAKX,CAA2B,KAEhC,KAAA;AAAA,MACDW,QAAKX,CAA0B,EAAA;AAAA,MAC/B,CAACY,MAAU;AACP,aAAK,gBAAgBA,KAAS;AAAA,MAElC;AAAA,MACA;AAAA,IAAA;AAAA,EAER;AAAA,EA8BS,SAAS;AACd,WAAG,KAAK,gBACGC,IAEJC;AAAA;AAAA,sDAEuCC,QAAKd,GAAWE,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMlE;AA6CJ;AA/GIH,IAAA,oBAAA,QAAA;AAZGC,IAAA,oBAAA,QAAA;AAsCHC,IAAO,WAAG;AACP,OAAA;AAAA,IACJ,IAAIc,EAAuB,CAACC,MAA4B;AASlD,WAAA,eAAeC,EAAYD,CAAQ,GACxC,KAAK,cAAc,cAAc;AAAA,IAAA,CACjC;AAAA,EAAA;AAEH;AAEGd,IAAW,WAAG;;AAChB,EAAAY,EAAA,MAAKd,GAALC,CAAA,EAAA,KAAA,IAAA,IAEKiB,IAAA,KAAA,kBAAA,QAAAA,EAAe,KAAK,MAAMC,GAA4B;AAAA,IAC1D,MAAM;AAAA,MACL,SAAST,EAAK,MAAAX,CAAA,EAA2B,sBAAsB,KAAK,cAAa,KAAK,iBAAiB;AAAA,IAExG;AAAA,EAAA;AAEF;AAhEYI,EAgFO,SAAS;AAAA,EAC3BiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyCD;AAxHAC,EAAA;AAAA,EADIC,EAAS,EAAE,MAAM,QAAQ;AAAA,GADjBnB,EAEZ,WAAA,qBAAA,CAAA;AAGWkB,EAAA;AAAA,EADPV,EAAM;AAAA,GAJER,EAKD,WAAA,iBAAA,CAAA;AAGHkB,EAAA;AAAA,EADJV,EAAM;AAAA,GAPER,EAQJ,WAAA,gBAAA,CAAA;AARIA,IAANkB,EAAA;AAAA,EADNE,EAAc,sBAAsB;AAAA,GACxBpB,CAAA;"}